# ðŸ“„ VolumeFollow

VolumeFollow â€” Ñ‚Ð¾Ñ€Ð³Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ Ð´Ð»Ñ **Barfinex DetectorService**,  
ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ **Ð¾Ð½Ð»Ð°Ð¹Ð½-Ð»ÐµÐ½Ñ‚Ñƒ ÑÐ´ÐµÐ»Ð¾Ðº** Ð¸ **ÑÑ‚Ð°ÐºÐ°Ð½ Ð·Ð°ÑÐ²Ð¾Ðº**, Ð²Ñ‹ÑÐ²Ð»ÑÐµÑ‚ ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ðµ Ð¾Ð±ÑŠÑ‘Ð¼Ñ‹  
Ð¸ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ð·Ð° ÐºÑ€Ð°Ñ‚ÐºÐ¾ÑÑ€Ð¾Ñ‡Ð½Ñ‹Ð¼ Ñ‚Ñ€ÐµÐ½Ð´Ð¾Ð¼.

---

## ðŸ‡·ðŸ‡º ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ (RU)

### ðŸ”¹ Ð›Ð¾Ð³Ð¸ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
- Ð’Ñ…Ð¾Ð´ Ð²Ð¾Ð·Ð¼Ð¾Ð¶ÐµÐ½ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€Ð¸ Ð¿Ð¾ÑÐ²Ð»ÐµÐ½Ð¸Ð¸ **ÐºÑ€ÑƒÐ¿Ð½Ð¾Ð¹ ÑÐ´ÐµÐ»ÐºÐ¸ (whale trade)**.
- Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑÐ»Ð¾Ð²Ð¸Ñ:
  - **Ð”Ð¸ÑÐ±Ð°Ð»Ð°Ð½Ñ ÑÑ‚Ð°ÐºÐ°Ð½Ð°** â€” bid Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ ask Ð¸Ð»Ð¸ Ð½Ð°Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚.
  - **Ð”ÐµÐ»ÑŒÑ‚Ð° Ñ‚Ñ€ÐµÐ¹Ð´Ð¾Ð²** â€” â‰¥70% Ð¿Ð¾ÐºÑƒÐ¿Ð¾Ðº Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð´Ð°Ð¶ Ð·Ð° Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ N ÑÐ´ÐµÐ»Ð¾Ðº.
  - **VWAP ÐºÑ€ÑƒÐ¿Ð½Ñ‹Ñ… ÑÐ´ÐµÐ»Ð¾Ðº** â€” Ñ†ÐµÐ½Ð° Ð²Ñ…Ð¾Ð´Ð° Ñ€ÑÐ´Ð¾Ð¼ Ñ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¼ Ð½Ð°ÐºÐ¾Ð¿Ð»ÐµÐ½Ð¸Ñ Ð¾Ð±ÑŠÑ‘Ð¼Ð¾Ð².

### ðŸ”¹ Ð›Ð¾Ð³Ð¸ÐºÐ° Ð²Ñ‹Ñ…Ð¾Ð´Ð°
- **StopLoss**: 0.5% Ð¾Ñ‚ Ñ†ÐµÐ½Ñ‹ Ð²Ñ…Ð¾Ð´Ð°.
- **ÐœÐ½Ð¾Ð³Ð¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ð¹ TakeProfit**:
  - **TP1 (1%)** â†’ Ñ„Ð¸ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ÑÑ 25% Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸.
  - **TP2 (2%)** â†’ Ñ„Ð¸ÐºÑÐ¸Ñ€ÑƒÐµÑ‚ÑÑ ÐµÑ‰Ñ‘ 25%.
  - **TP3 (3%)** â†’ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ðº.
- **TrailingStop**: ÑÑ‚Ð¾Ð¿ Ð¿Ð¾Ð´Ñ‚ÑÐ³Ð¸Ð²Ð°ÐµÑ‚ÑÑ Ð·Ð° Ñ†ÐµÐ½Ð¾Ð¹ Ð½Ð° 0.5%.
- **Reverse Signal**: Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾Ð¿Ð¾Ð»Ð¾Ð¶Ð½Ð¾Ð¹ Ð¿Ñ€Ð¸ ÑÐ¼ÐµÐ½Ðµ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° ÑÐ´ÐµÐ»Ð¾Ðº.
- **Time Limit**: Ð¿Ñ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ Ñ‡ÐµÑ€ÐµÐ· 30 Ð¼Ð¸Ð½ÑƒÑ‚.

### ðŸ”¹ Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ
- Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ñ… Ñ‚Ñ€ÐµÐ¹Ð´Ð¾Ð² (Ð´Ð¾ 200).
- Ð¡Ð½Ð¸Ð¼Ð¾Ðº Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÑ‚Ð°ÐºÐ°Ð½Ð°.
- Ð£ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÑ‚ÑÑ:
  - ÐÐ°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ (LONG/SHORT).
  - Ð¦ÐµÐ½Ð° Ð¸ Ð²Ñ€ÐµÐ¼Ñ Ð²Ñ…Ð¾Ð´Ð°.
  - ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð¾Ð².
  - Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ TrailingStop.
  - Ð¡Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð²ÑˆÐ¸Ðµ TP.

---

## ðŸ‡¬ðŸ‡§ Description (EN)

### ðŸ”¹ Entry Logic
- Entry only allowed when a **large trade (whale trade)** is detected.
- Additional conditions:
  - **Order book imbalance** â€” bids â‰« asks or vice versa.
  - **Trade delta** â€” â‰¥70% buys or sells over the last N trades.
  - **VWAP of large trades** â€” entry near whale accumulation level.

### ðŸ”¹ Exit Logic
- **StopLoss**: 0.5% from entry.
- **Multi-level TakeProfit**:
  - **TP1 (1%)** â†’ close 25% of position.
  - **TP2 (2%)** â†’ close another 25%.
  - **TP3 (3%)** â†’ close remaining position.
- **TrailingStop**: follows price by 0.5%.
- **Reverse Signal**: closes and flips position on trade flow reversal.
- **Time Limit**: force exit after 30 minutes.

### ðŸ”¹ State Management
- Keeps up to 200 last trades.
- Stores the latest order book snapshot.
- For open position tracks:
  - Direction (LONG/SHORT).
  - Entry price and time.
  - Position size.
  - Current TrailingStop level.
  - Triggered TP flags.

---

## ðŸ“Š Flowchart

```mermaid
flowchart TD
    A[Start] --> B{Big Trade?}
    B -- No --> A
    B -- Yes --> C{Confirm: Delta + OB Imbalance + VWAP}
    C -- No --> A
    C -- Yes --> D[Enter Position LONG/SHORT]

    D --> E{TP1 Hit?}
    E -- Yes --> F[Close 25% + tighten trailing]
    E -- No --> G{TP2 Hit?}

    G -- Yes --> H[Close 25% + tighten trailing]
    G -- No --> I{TP3 Hit?}

    I -- Yes --> J[Close 50% â†’ Exit]
    I -- No --> K{StopLoss / TrailingStop / Reverse / TimeLimit}
    K -- Yes --> J[Close All â†’ Exit]
    K -- No --> D
